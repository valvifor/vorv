{"ast":null,"code":"var _jsxFileName = \"D:\\\\task5\\\\client\\\\src\\\\MainPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { io } from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MainPage() {\n  _s();\n  const navigate = useNavigate();\n  const [socket, setSocket] = useState();\n  const [docs, setDocs] = useState([]);\n  const [docName, setDocName] = useState(\"\");\n  useEffect(() => {\n    const s = io(\"http://localhost:3001\");\n    setSocket(s);\n    return () => {\n      s.disconnect();\n    };\n  }, []);\n  useEffect(() => {\n    if (socket == null) return;\n    socket.emit('get-all-documents');\n  }, [socket]);\n  useEffect(() => {\n    if (socket == null) return;\n    const handler = documents => {\n      setDocs(documents);\n    };\n    socket.on('receive-all-documents', handler);\n    return () => {\n      socket.off('receive-all-documentss', handler);\n    };\n  }, [socket]);\n  useEffect(() => {\n    if (socket == null) return;\n    const handler = uuid => {\n      navigate(`/documents/${uuid}`);\n    };\n    socket.on('doc-uuid', handler);\n    return () => {\n      socket.off('doc-uuid', handler);\n    };\n  }, [socket, navigate]);\n  const OnChangeName = e => {\n    setDocName(e.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"name\",\n      value: docName,\n      onChange: OnChangeName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      \"text-align\": \"center\",\n      onClick: () => socket.emit(\"create-doc\", docName),\n      children: \"Create new document\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), docs.map((document, i) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: `/documents/${document._id}`,\n          activeClassName: \"active\",\n          children: document.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 25\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n_s(MainPage, \"K7BWy8K62I9QA5bEEoYtPaj6HxM=\", false, function () {\n  return [useNavigate];\n});\n_c = MainPage;\nvar _c;\n$RefreshReg$(_c, \"MainPage\");","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","io","jsxDEV","_jsxDEV","MainPage","_s","navigate","socket","setSocket","docs","setDocs","docName","setDocName","s","disconnect","emit","handler","documents","on","off","uuid","OnChangeName","e","target","value","children","type","name","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","document","i","to","_id","activeClassName","_c","$RefreshReg$"],"sources":["D:/task5/client/src/MainPage.js"],"sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport {\r\n    Link,\r\n    useNavigate \r\n} from 'react-router-dom'\r\nimport { io } from \"socket.io-client\"\r\n\r\nexport default function MainPage() {\r\n    const navigate = useNavigate();\r\n    const [socket, setSocket] = useState();\r\n    const [docs, setDocs] = useState([]);\r\n    const [docName, setDocName] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        const s = io(\"http://localhost:3001\")\r\n        setSocket(s)\r\n\r\n        return () => {\r\n            s.disconnect()\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (socket == null) return\r\n        socket.emit('get-all-documents')\r\n    }, [socket])\r\n\r\n    useEffect(() => {\r\n        if (socket == null) return\r\n\r\n        const handler = (documents) => {\r\n            setDocs(documents)\r\n        }\r\n        socket.on('receive-all-documents', handler)\r\n\r\n        return () => {\r\n            socket.off('receive-all-documentss', handler)\r\n        }\r\n    }, [socket])\r\n\r\n    useEffect(() => {\r\n        if (socket == null) return\r\n\r\n        const handler = (uuid) => {\r\n            navigate(`/documents/${uuid}`)\r\n        }\r\n        socket.on('doc-uuid', handler)\r\n\r\n        return () => {\r\n            socket.off('doc-uuid', handler)\r\n        }\r\n    }, [socket, navigate])\r\n\r\n    const OnChangeName = (e) => {\r\n        setDocName(e.target.value)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <input type=\"text\" name=\"name\" value={docName} onChange={OnChangeName}/>\r\n            <button\r\n                type='button'\r\n                text-align= 'center'\r\n                onClick={() => socket.emit(\"create-doc\", docName)}\r\n            >\r\n                Create new document\r\n            </button>\r\n            \r\n            {docs.map((document, i) => {\r\n                    return (\r\n                        <div>\r\n                            <Link to={`/documents/${document._id}`} activeClassName=\"active\">{document.name}</Link>\r\n                            <br/>\r\n                        </div>\r\n                    )\r\n                }\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}